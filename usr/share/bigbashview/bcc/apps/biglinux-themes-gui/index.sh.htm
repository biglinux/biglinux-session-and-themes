#!/bin/bash

#Translation
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=biglinux-session-and-themes

# Don't group windows
xprop -id "$(xprop -root '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)" -f WM_CLASS 8s -set WM_CLASS "$$"


# Import BigControlCenter base modules / Importa os módulos básicos do BigControlCenter
# That's include jquery and materialize / Isso inclui o jquery e o materialize
# http://materializecss.com/
# . /usr/share/bigbashview/bcc/shell/base.sh

theme_actual="$(cat "$HOME/.big_desktop_theme")"
TAB1=$"Temas"
TAB2=$"Desktop"
TAB3=$"Ajustes"
Desempenho_translate=$"Desempenho do desktop"
Browser_translate=$"Aceleração do navegador"
Use_translate=$"Usabilidade"
Tema_translate=$"Tema dos aplicativos"
More_themes_translate=$"Temas"
CLOSE=$"Fechar"
orchis=$"Bordas arredondadas."
fluent=$"Esse tema possui transparências com efeitos que<br>podem tornar o sistema lento em computadores<br>antigos ou ambientes virtualizados."
DESKTOP_FASTER=$"<b>Classic</b> e <b>New</b> têm melhor desempenho."
Reduce_Visual_Effects=$"Renderizar o desktop via software"
Reduce_Visual_Effects2=$"(Pode ser útil em máquina virtual ou computadores antigos)"
Configure_Preload=$"Escolher programas a serem carregados na memória durante boot"
Preload_loads_program_files=$"O Preload carrega arquivos dos programas na memória, para que iniciem rapidamente. O uso excessivo causa lentidão. Escolha a opção desejada:"

Browser_acceleration=$"Aceleração do navegador"
Automatic=$"Automático"
Activate=$"Ativar"
Disable=$"Desativar"
Brave_Settings=$"Configurações do Brave"
Choose_the_desired_option=$"Escolha a opção desejada:"
Remove_advertisements=$"Remover propagandas"
Support_cryptocurrencies=$"Suportar criptomoedas"
Usability=$"Usabilidade"
Window_buttons_on_the_left_side=$"Botões da janela no lado esquerdo"
Inverted_mouse_scroll=$"Rolagem do mouse invertida"
Search_files=$"Pesquisar arquivos"
Lock_the_workspace=$"Bloquear a área de trabalho"
HideGrub_text=$"Ocultar Gerenciador de Boot (GRUB)"
NumLock_text=$"Teclado numérico (NumLock)"

Theme_change=$"Tema aplicado"
Need_restart=$"É preciso reiniciar a sessão para concluir a configuração. Deseja fazer agora?"
Config_desktop=$"Configuração do Desktop"
Desktop_detect=$"Você já utilizou esse desktop antes, deseja  restaurar sua personalização ou utilizar a configuração original?"
YES=$"Sim"
NO=$"Não"
Original=$"Original"
Restore=$"Restaurar"
Desktop_apply=$"Desktop aplicado"


if [ "$checked_refresh" = "checked" ]; then
  active_refresh_2="active"
  
else
  active_refresh_1="active"
  check_default="checked"
fi


if [ "$(glxinfo | grep llvmpipe)" != "" ]; then
  NO_OGL=$"Utilizando renderização por software, a qualidade das transparências está reduzida."
fi

browser="$(cat "$HOME/.config/browser-optimize")"

if [ "$browser" = "" ]; then
    checked_browser_auto="checked"
fi

if [ "$browser" = "performance" ]; then
    checked_browser_yes="checked"
fi

if [ "$browser" = "optimize" ]; then
    checked_browser_no="checked"
fi



# if [ "$theme_actual" = "" ]; then
#     biglinux-themes.sh --apply orchis
#     checked_arc="checked"
# fi

if [ "$theme_actual" = "breeze" ]; then
    checked_breeze="checked"
fi

if [ "$theme_actual" = "breeze-dark" ]; then
    checked_breeze_dark="checked"
fi

if [ "$theme_actual" = "fluent" ]; then
    checked_fluent="checked"
fi

if [ "$theme_actual" = "fluent-dark" ]; then
    checked_fluent_dark="checked"
fi

if [ "$theme_actual" = "fluent-solid" ]; then
    checked_fluent="checked"
fi

if [ "$theme_actual" = "fluent-dark-solid" ]; then
    checked_fluent_dark="checked"
fi

if [ "$theme_actual" = "orchis" ]; then
    checked_orchis="checked"
fi

if [ "$theme_actual" = "orchis-dark" ]; then
    checked_orchis_dark="checked"
fi

if [ "$theme_actual" = "materia" ]; then
    checked_materia="checked"
fi

if [ "$theme_actual" = "materia-dark" ]; then
    checked_materia_dark="checked"
fi

performance_actual="$(cat "$HOME/.big_performance")"

if [ "$performance_actual" = "" ] || [ "$performance_actual" = "0" ]; then
    checked_normal="checked"
fi

if [ "$performance_actual" = "1" ]; then
    checked_optimized="checked"
fi

if [ "$performance_actual" = "2" ]; then
    checked_performance="checked"
fi

if [ -e "$HOME/.config/lockplasma" ]; then
    checked_lock_desktop="checked"
fi

if [ -e "$HOME/.config/hidegrub" ]; then
    checked_hidegrub="checked"
fi

INPUT=$(grep Numlock=on /etc/sddm.conf)
if [ -n "$INPUT" ]; then
    checked_confnumlock="checked"
fi

if [ "$(LANG=C balooctl status 2>&1| grep 'is running')" != "" ]; then
    checked_search="checked"
fi

if [ "$(kreadconfig5  --group "Mouse" --key "XLbInptNaturalScroll" --file "$HOME/.config/kcminputrc")" = "true" ]; then
    checked_scrool_natural="checked"
fi

if [ "$(grep 'FSM' ~/.config/kwinrc)" != "" ]; then
    checked_left_button="checked"
fi

if [ -e "$HOME/.config/browser-brave-disable-ad" ]; then
    checked_braveblock_no="checked"
else
    checked_braveblock_yes="checked"
fi

if [ -e "$HOME/.config/browser-brave-disable-crypto" ]; then
    checked_bravecrypto_no="checked"
else
    checked_bravecrypto_yes="checked"
fi

cat << EOF

<html>
<head>
  <meta charset="UTF-8">
  <link rel='stylesheet'><link rel="stylesheet" href="./style.css">
</head>
EOF

# Get body tag with color light or not
/usr/share/bigbashview/bcc/shell/getbgcolor.sh

cat << EOF
<body>
<div class="dark-light">
  <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
  </svg>
</div>
<div class="principal">
  <div class="wrap">
    <div class="user">
      <div id="toggle-wrap">
        <div id="toggle-terms">
          <div id="cross">
            <span></span>
            <span></span>
          </div>
        </div>
      </div>

  <div class="logo">
    <a href="#"><img src="logo-big-trans-branco.png" alt="" class="logo-biglinux"></a>
  </div>


  <div class="user">
    <!-- ACTIONS -->
    <div class="form-wrap">
      <!-- TABS -->
      <div class="tabs">
        <input type="radio" id="tab1" name="tab-control" $check_default>
        <input type="radio" id="tab2" name="tab-control" $checked_refresh>
        <input type="radio" id="tab3" name="tab-control">  
        <ul>
          <li title="Temas"><label for="tab1" role="button" id="#theme-tab-content"><svg viewBox="0 0 512 512"><path d="M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg><br><span> $TAB1</span></label></li>
          
          <li title="Desktop"><label for="tab2" role="button" id="#desktop-tab-content">
          <svg viewBox="0 0 576 512"><path d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"/></svg><br><span> $TAB2</span></label></li>

          
          <li title="Ajustes"><label for="tab3" role="button" id="#desempenho-tab-content">
          <svg viewBox="0 0 512 512"><path d="M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"/></svg><br><span> $TAB3</span></label></li>
        </ul>

        <div class="slider"><div class="indicator"></div></div>          
      </div>

      <!-- TABS CONTENT -->
      <div class="tabs-content"> 
        <!-- TABS CONTENT THEME -->
        <div id="theme-tab-content" class="fc-card $active_refresh_1">

          <p>$NO_OGL</p>
          
          <div class="centertext">
            <div id="desc">            
              <ul id="menu" class="img-label">
              
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply breeze')"><img src="breeze.jpg"> <label>Breeze</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply fluent')"><img src="fluent.jpg"> <label>Fluent</label></a>
                </li>                
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply fluent-solid')"><img src="fluent-solid.jpg"> <label>Fluent Solid</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply materia')"><img src="materia.jpg"> <label>Materia</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply breeze-dark')"><img src="breeze-dark.jpg"> <label>Breeze Dark</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply fluent-dark')"><img src="fluent-dark.jpg"> <label>Fluent Dark</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply fluent-dark-solid')"><img src="fluent-dark-solid.jpg"> <label>Fluent Solid Dark</label></a>
                </li>
                
                <li>
                  <a href="#" class="status-button-themeapply" onclick="_run('biglinux-themes.sh --apply materia-dark')"><img src="materia-dark.jpg"> <label>Materia Dark</label></a>
                </li>
              
              </ul>
            </div> 
            
            <div class="pop-up-themeapply">
              <div class="pop-up__title">$Theme_change
                <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                  <circle cx="12" cy="12" r="10" />
                  <path d="M15 9l-6 6M9 9l6 6" />
                </svg>
              </div>
              <div class="pop-up__subtitle">$Need_restart</div>
              <div id="desc">
                <ul id="menu">
                  <li>
                    <div class="content-button-wrapper" style="text-align: right;">
                      <!-- <button id="btnClick" class="content-button close" onclick="_run('qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.closeSession')">$YES</button> -->
                      
                      <button class="content-button close" onclick="_run('qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.closeSession')">$YES</button>
                    </div>
                  </li>
                  <li>
                    <div class="content-button-wrapper" style="text-align: left;">
                      <!-- <button id="btnClick" class="content-button close">$NO</button> -->
                      <button class="content-button close">$NO</button>
                    </div>
                  </li>
                </ul>
              </div>
            </div>             
            
            
            <br><br>
          </div>
        </div>
        <!-- TABS CONTENT DESKTOP -->
        <div id="desktop-tab-content" class="fc-card $active_refresh_2">
EOF

desktop_actual="$(cat ~/.kdebiglinux/lastused)"

if [ "$desktop_actual" = "classic" ]; then
    checked_desktop_classic="checked"
fi

if [ "$desktop_actual" = "kunity" ]; then
    checked_desktop_kunity="checked"
fi

if [ "$desktop_actual" = "new" ]; then
    checked_desktop_new="checked"
fi

if [ "$desktop_actual" = "nextg" ]; then
    checked_desktop_nextg="checked"
fi

cat << EOF

          <p style="text-align:center">$DESKTOP_FASTER</p>
          
          <div class="centertext">
            <div id="desc">
              <ul id="menu">
                <li>
                  <!--<a onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/desktop_config.run classic')" class="show-classic">
                  <a id="linkClassic" href="#" class="status-button-classic"><img src="desktop-classic.svg"></a>-->
EOF
  if [ -e "$HOME/.kdebiglinux/classic" ]; then
    echo '<a id="linkClassic" href="#" class="status-button-classic"><img src="desktop-classic.svg"></a>'
  else
    echo '<a id="linkClassic" href="#" class="status-button-desktopapply show-classic" onclick="_run(`change-plasma-theme --apply classic`)"><img src="desktop-classic.svg"></a>'
  fi

  if [ "$desktop_actual" = "classic" ]; then
echo '        <div id="myDivClassic"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'    
  else
echo '        <div id="myDivClassic" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'                
  fi                  
cat << EOF
                </li>

                <div class="pop-up-classic">
                  <div class="pop-up__title">$Config_desktop
                    <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Desktop_detect</div>                 
                  <div id="desc">
                    <ul id="menu">
                      <li>
                        <div class="content-button-wrapper" style="text-align: right;">
                          <button class="content-button close status-button-desktopapply show-classic" onclick="_run('change-plasma-theme --apply classic clean')">$Original</button>
                        </div>
                      </li>
                      <li>
                        <div class="content-button-wrapper" style="text-align: left;">
                          <button class="content-button close status-button-desktopapply show-classic" onclick="_run('change-plasma-theme --apply classic')">$Restore</button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>

                
                
                <li>
                  <!--<a onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/desktop_config.run kunity')" class="show-kunity status-button-kunity"><img src="desktop-k-unity.svg"></a>
                  <a id="linkKunity" href="#" class="status-button-kunity"><img src="desktop-k-unity.svg"></a>-->
EOF

  if [ -e "$HOME/.kdebiglinux/kunity" ]; then
    echo '<a id="linkKunity" href="#" class="status-button-kunity"><img src="desktop-k-unity.svg"></a>'
  else
    echo '<a id="linkKunity" href="#" class="status-button-desktopapply show-kunity" onclick="_run(`change-plasma-theme --apply kunity`)"><img src="desktop-k-unity.svg"></a>'
  fi

  if [ "$desktop_actual" = "kunity" ]; then
echo '        <div id="myDivKunity"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'    
  else
echo '        <div id="myDivKunity" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'                
  fi                  
cat << EOF
                </li>
                
                
                <div class="pop-up-kunity">
                  <div class="pop-up__title">$Config_desktop
                    <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Desktop_detect</div>                 
                  <div id="desc">
                    <ul id="menu">
                      <li>
                        <div class="content-button-wrapper" style="text-align: right;">
                          <button class="content-button close status-button-desktopapply show-kunity" onclick="_run('change-plasma-theme --apply kunity clean')">$Original</button>
                        </div>
                      </li>
                      <li>
                        <div class="content-button-wrapper" style="text-align: left;">
                          <button class="content-button close status-button-desktopapply show-kunity" onclick="_run('change-plasma-theme --apply kunity')">$Restore</button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                
                
                
                
                
                <li>
                  <!--<a onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/desktop_config.run new')" class="show-new"><img src="desktop-new.svg"></a>
                  <a id="linkNew" href="#" class="status-button-new"><img src="desktop-new.svg"></a>-->
EOF
  if [ -e "$HOME/.kdebiglinux/new" ]; then
    echo '<a id="linkNew" href="#" class="status-button-new"><img src="desktop-new.svg"></a>'
  else
    echo '<a id="linkNew" href="#" class="status-button-desktopapply show-new" onclick="_run(`change-plasma-theme --apply new`)"><img src="desktop-new.svg"></a>'
  fi


  if [ "$desktop_actual" = "new" ]; then
echo '        <div id="myDivNew"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'    
  else
echo '        <div id="myDivNew" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'                
  fi                  
cat << EOF                  
                </li>

                <div class="pop-up-new">
                  <div class="pop-up__title">$Config_desktop
                    <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Desktop_detect</div>                 
                  <div id="desc">
                    <ul id="menu">
                      <li>
                        <div class="content-button-wrapper" style="text-align: right;">
                          <button class="content-button close status-button-desktopapply show-new" onclick="_run('change-plasma-theme --apply new clean')">$Original</button>
                        </div>
                      </li>
                      <li>
                        <div class="content-button-wrapper" style="text-align: left;">
                          <button class="content-button close status-button-desktopapply show-new" onclick="_run('change-plasma-theme --apply new')">Restaurar</button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>                
                
                
                
                <li>
                  <!--<a onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/desktop_config.run nextg')" class="show-nextg"><img src="desktop-next-g.svg"></a>
                  <a id="linkNextg" href="#" class="status-button-nextg"><img src="desktop-next-g.svg"></a>-->
EOF
  if [ -e "$HOME/.kdebiglinux/nextg" ]; then
    echo '<a id="linkNextg" href="#" class="status-button-nextg"><img src="desktop-next-g.svg"></a>'
  else
    echo '<a id="linkNextg" href="#" class="status-button-desktopapply show-nextg" onclick="_run(`change-plasma-theme --apply nextg`)"><img src="desktop-next-g.svg"></a>'
  fi

  if [ "$desktop_actual" = "nextg" ]; then
echo '        <div id="myDivNextg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'    
  else
echo '        <div id="myDivNextg" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:26px; top:-5px;"><path fill="currentcolor" d="M0 256C0 
              114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM371.8 211.8C382.7 200.9 382.7 183.1 371.8 172.2C360.9 161.3 343.1 161.3 332.2 172.2L224 280.4L179.8 236.2C168.9 225.3 151.1 225.3 140.2 236.2C129.3 247.1 129.3 264.9 140.2 275.8L204.2 339.8C215.1 350.7 232.9 350.7 243.8 339.8L371.8 211.8z"/></svg></div>'                
  fi                  
cat << EOF
                </li>
                
                
                

                <div class="pop-up-nextg">
                  <div class="pop-up__title">$Config_desktop
                    <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Desktop_detect</div>                 
                  <div id="desc">
                    <ul id="menu">
                      <li>
                        <div class="content-button-wrapper" style="text-align: right;">
                          <button class="content-button close status-button-desktopapply show-nextg " onclick="_run('change-plasma-theme --apply nextg clean')">$Original</button>
                        </div>
                      </li>
                      <li>
                        <div class="content-button-wrapper" style="text-align: left;">
                          <button class="content-button close status-button-desktopapply show-nextg" onclick="_run('change-plasma-theme --apply nextg')">$Restore</button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>


                <div class="pop-up-desktopapply">
                  <div class="pop-up__title">$Desktop_apply
                    <svg id="btnClick" class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Need_restart</div>
                  <div id="desc">
                    <ul id="menu">
                      <li>
                        <div class="content-button-wrapper" style="text-align: right;">
                          <button id="btnClick" class="content-button close" onclick="_run('qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.closeSession')">$YES</button>
                        </div>
                      </li>
                      <li>
                        <div class="content-button-wrapper" style="text-align: left;">
                          <button id="btnClick" class="content-button close">$NO</button>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>                                
                
                
              </ul>
            </div>

                   
          </div>
        </div>

        <div id="desempenho-tab-content" class="fc-card">
         
          <div class="biglinux-dashboard">
            <div class="biglinux-left-panel">
              <h4>$Desempenho_translate</h4>
              <div class="biglinux-card" style="height: 75%; position: relative;">


                <input id="s0" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/change_performance.run')" type="checkbox" class="switch" style="top: 3px;" $checked_optimized>
                <span for="s0">$Reduce_Visual_Effects</span><br>
                <small><small>$Reduce_Visual_Effects2</small></small>

                <br style="clear: left;" />
                <br style="clear: left;" />
                <div class="button-wrapper" style="position: absolute; bottom: 15px; ">
                  <button class="content-button status-button">$Configure_Preload</button>

                </div>

              </div>

              <div class="pop-up">
                <div class="pop-up__title">$Configure_Preload
                  <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M15 9l-6 6M9 9l6 6" />
                  </svg>

                </div>
                <br>
EOF

func-preload() {

    if [ -e "/etc/big-preload/enable-$1" ]; then
        preload_checked="checked"
    else
        preload_checked=""    
    fi

cat << EOF
    <li>
    <div class="checkbox-wrapper">
        <input name="$1" id="$1" type="checkbox" class="switch" style="display: inline-block; float: left;" onchange="_run('./change-preload.run $1')" $preload_checked><span for="$1">$2</span>
    </div>
    </li> 
EOF

}


CAT << EOF
              <div class="pop-up__subtitle">$Preload_loads_program_files</a></div>
              <div id="desc">
                <ul id="menu">
EOF

func-preload firefox "Firefox"
func-preload brave "Brave"
func-preload chrome "Google Chrome"
func-preload chromium "Chromium"
func-preload palemoon "Palemoon"
func-preload opera "Opera"
func-preload vivaldi "Vivaldi"
func-preload epiphany "Epiphany"
func-preload libreoffice "LibreOffice"
func-preload kde "Desktop KDE"

cat << EOF
                </ul>
                        
                <div class="content-button-wrapper">
                  <button class="content-button status-button2 open close">$CLOSE</button>
                </div>
              </div>              

              </div>
              
              <div class="biglinux-left-panel">
                <h4>$Browser_acceleration</h4>
                <div class="biglinux-card" style="height: 75%; position: relative;">
                  <input id="r1" type="radio" name="radio" value="1" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/browser-auto.run')" $checked_browser_auto>
                  <span for="Automático">$Automatic</span>
                  <br style="clear: left;" />
                  <input id="r2" type="radio" name="radio" value="2" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/browser-yes.run')" $checked_browser_yes>
                  <span for="Ativar">$Activate</span>
                  <br style="clear: left;" />
                  <input id="r3" type="radio" name="radio" value="2" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/browser-no.run')" $checked_browser_no>
                  <span for="Desativar">$Disable</span>

                  <br style="clear: left;" />
                  <br style="clear: left;" />
                  <div class="button-wrapper" style="position: absolute; bottom: 15px; ">
                    <button class="content-button status-button2">$Brave_Settings</button>

                  </div>

                  <br style="clear: left;" />
                </div>

                <div class="pop-up2">
                  <div class="pop-up__title">$Brave_Settings
                    <svg class="close" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                      <circle cx="12" cy="12" r="10" />
                      <path d="M15 9l-6 6M9 9l6 6" />
                    </svg>
                  </div>
                  <div class="pop-up__subtitle">$Choose_the_desired_option</div>

                  <div id="desc">
                    <ul id="menu">
                      <li><div class="checkbox-wrapper">
                        <input id="braveblock" type="checkbox" class="switch" style="display: inline-block; float: left;" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/braveblock-change.run')" $checked_braveblock_yes>
                        <span for="braveblock">$Remove_advertisements</span>
                        </div>
                      </li>
                      <li><div class="checkbox-wrapper">
                        <input id="bravecrypto" type="checkbox" class="switch" style="display: inline-block; float: left;" onclick="_run('/usr/share/bigbashview/bcc/apps/biglinux-themes-gui/bravecrypto-change.run')" $checked_bravecrypto_yes>
                        <span for="bravecrypto">$Support_cryptocurrencies</span>
                        </div>
                      </li>
                    </ul>
                  </div>

                  <div class="content-button-wrapper">
                    <button class="content-button status-button2 open close">$CLOSE</button>
                  </div>
                </div>            
              </div>
          
            </div>
            
              <div class="biglinux-dashboard">
                <div class="biglinux-center-panel">
                  <h4>$Usability</h4>
                  <div class="biglinux-card" style="height: 75%; position: relative;">

                    <ul>
                      <li style="padding: 2px;" onchange="_run('./kwin_button.run')">
                        
                          <input id="desktop1" name="bb1" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_left_button>
                          <span for="desktop1">$Window_buttons_on_the_left_side<br><small></small></span>
                        
                      </li>                    
                      <li style="padding-top: 2px;" onchange="_run('./mouse.run')">
                        
                          <input id="desktop2" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_scrool_natural>
                          <span for="desktop2">$Inverted_mouse_scroll<br><small></small></span>
                        
                      </li> 
                    </ul>
                    <ul>
                      <li style="padding: 2px;" onchange="_run('./search.run')">
                        
                          <input id="desktop3" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_search>
                          <span for="desktop3">$Search_files<br><small></small></span>
                        
                      </li>                    
                      <li style="padding-top: 2px;" onchange="_run('./lock-desktop.run')">
                        
                          <input id="desktop4" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_lock_desktop>
                          <span for="desktop4">$Lock_the_workspace<br><small></small></span>
                        
                      </li>                    
                    </ul>
                    <ul>
                      <li style="padding: 2px;" onchange="_run('pkexec ./grub.run')">
                        
                          <input id="desktop3" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_hidegrub>
                          <span for="desktop3">$HideGrub_text<br><small></small></span>
                        
                      </li>                    
                      <li style="padding-top: 2px;" onchange="_run('./numlock.run')">
                        
                          <input id="desktop4" type="checkbox" class="switch" style="display: inline-block; float: left;" $checked_confnumlock>
                          <span for="desktop4">$NumLock_text<br><small></small></span>
                        
                      </li>                    
                    </ul>
                </div>
              </div>
            </div>
          
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
</div>
</div>
<!-- partial -->
  <script src='/usr/share/bigbashview/bcc/materialize/js/jquery.js'></script><script  src="./script.js"></script>
EOF
if [ "$desktop_actual" = "classic" ]; then
  echo '<script>$(document).ready(function(){$(`#linkClassic`).toggleClass("disabled-link");});</script>'
fi

if [ "$desktop_actual" = "kunity" ]; then
  echo '<script>$(document).ready(function(){$(`#linkKunity`).toggleClass("disabled-link");});</script>'
fi

if [ "$desktop_actual" = "new" ]; then
  echo '<script>$(document).ready(function(){$(`#linkNew`).toggleClass("disabled-link");});</script>'
fi

if [ "$desktop_actual" = "nextg" ]; then
  echo '<script>$(document).ready(function(){$(`#linkNextg`).toggleClass("disabled-link");});</script>'
fi
cat << EOF
</body>
</html>
      
EOF



